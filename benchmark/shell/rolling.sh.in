#!/usr/bin/env bash

DT_ARRAY=( "0.00001" "0.00004" "0.0001" "0.0004" "0.001" "0.004" "0.01" "0.04" "0.1" )

# options
BENCHMARK_RAISIM="@BENCHMARK_RAISIM@"
BENCHMARK_BULLET="@BENCHMARK_BULLET@"
BENCHMARK_ODE="@BENCHMARK_ODE@"
BENCHMARK_MUJOCO="@BENCHMARK_MUJOCO@"

# benchmark test
for dt in ${DT_ARRAY[@]}
do
    for forcedir in xy y
    do
        # rai sim
        if [ "$BENCHMARK_RAISIM" == "ON" ] ; then
            for erpon in true false
            do
                ./rollingRaiSim --nogui --erp-on=$erpon --dt=$dt --force-direction=$forcedir
            done
        fi

        # bullet sim
        if [ "$BENCHMARK_BULLET" == "ON" ] ; then
            for solver in seqImp nncg pgs dantzig #lemke
            do
                for erpon in true false
                do
                    ./rollingBulletSim --nogui --erp-on=$erpon --dt=$dt --solver=$solver --force-direction=$forcedir
                done
            done
        fi

        # ode sim
        if [ "$BENCHMARK_ODE" == "ON" ] ; then
            for solver in std quick
            do
                for erpon in true false
                do
                    ./rollingODESim --nogui --erp-on=$erpon --dt=$dt --solver=$solver --force-direction=$forcedir
                done
            done
        fi

        # mujoco sim
        if [ "$BENCHMARK_MUJOCO" == "ON" ] ; then
            for solver in pgs cg newton
            do
                ./rollingMuJoCoSim --nogui --dt=$dt --solver=$solver --force-direction=$forcedir
            done
        fi
    done
done